# armv7-A系列-arm处理器模式
对于大型操作系统而言，系统安全是一个至关重要的问题，对于系统的硬件资源，应该限制应用程序直接访问，而由系统更高级别的程序进行管理，linux 和 windows 都是基于此原则实现的，这里更高级别的程序指的就是操作系统的内核。  

内核相对于应用程序自然需要拥有更高的操作权限，这种权限的区分完全由软件实现是非常困难的，需要芯片架构层面的支持。对于所有现代的处理器，几乎都会在处理器架构层面设计不同的特权等级，以适应不同的软件隔离要求。  

arm 当然也不例外，armv6 架构提供了 6 种工作模式：
* User
* FIQ
* IRQ
* Supervisor
* Abort
* Undefined
* System

其中， User 模式处于 PL0 特权级，又被称为非特权级模式，可以访问的硬件资源十分受限，其它 5 种模式都处于 PL1 特权级模式。普通的应用程序就是运行在user模式(PL0)下，没有对硬件的直接访问权，所有的硬件操作都需要通过系统调用向内核进行申请，内核运行在特权级模式(PL1)下，对系统调用进行响应、处理并返回，以这种隔离的方式保证了内核的安全。   

相对于 armv6 架构而言，armv7 新增了安全扩展和虚拟化扩展，在系统模式上新增了两种：monitor mode 和 hypervisor mode，同时也增加了另一种特权级：PL2，hypervisor mode 就运行在 PL2 等级中，hyp mode 与虚拟化扩展相关，只有实现了虚拟化扩展的处理器才支持 hyp mode。  








